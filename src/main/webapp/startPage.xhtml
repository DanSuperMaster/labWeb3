<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:p="http://primefaces.org/ui">

<h:head>
    <h:outputStylesheet library="css" name="styleStartPage.css" />
    <title>Into the Unknown</title>

</h:head>
<h:body>

    <div class="left-side">
        <canvas class="draw-canvas" width="840" height="400"></canvas>

        <h:form id="mainForm">
            <!-- Remote commands -->
            <p:remoteCommand name="myCommand" actionListener="#{attemptBean.submit}" style="display: none;"/>

            <!-- Hidden fields for coordinates -->
            <h:inputText id="propertyX" styleClass="property-x" value="#{attemptBean.x}" style="display:none">
                <f:ajax event="change" execute="@this" render="@none"
                        listener="#{attemptBean.setXValue(propertyX.value)}" />
            </h:inputText>

            <h:inputText id="propertyY" styleClass="property-y" value="#{attemptBean.y}" style="display:none">
                <f:ajax event="change" execute="@this" render="@none"
                        listener="#{attemptBean.setYValue(propertyY.value)}" />
            </h:inputText>

            <!-- X coordinate links -->
            <div class="command-links">
                <p>Choose X coordinate(s): </p>
                <h:commandLink onclick="setXValueAndSync('-2'); return false;" value="-2">
                    <f:ajax execute="@this" render="@none" />
                </h:commandLink><span> </span>

                <h:commandLink onclick="setXValueAndSync('-1.5'); return false;" value="-1.5">
                    <f:ajax execute="@this" render="@none" />
                </h:commandLink><span> </span>

                <h:commandLink onclick="setXValueAndSync('-1'); return false;" value="-1">
                    <f:ajax execute="@this" render="@none" />
                </h:commandLink><span> </span>

                <h:commandLink onclick="setXValueAndSync('-0.5'); return false;" value="-0.5">
                    <f:ajax execute="@this" render="@none" />
                </h:commandLink><span> </span>

                <h:commandLink onclick="setXValueAndSync('0'); return false;" value="0">
                    <f:ajax execute="@this" render="@none" />
                </h:commandLink><span> </span>

                <h:commandLink onclick="setXValueAndSync('0.5'); return false;" value="0.5">
                    <f:ajax execute="@this" render="@none" />
                </h:commandLink><span> </span>

                <h:commandLink onclick="setXValueAndSync('1'); return false;" value="1">
                    <f:ajax execute="@this" render="@none" />
                </h:commandLink><span> </span>

                <h:commandLink onclick="setXValueAndSync('1.5'); return false;" value="1.5">
                    <f:ajax execute="@this" render="@none" />
                </h:commandLink><span> </span>
            </div>

            <!-- Y coordinate input -->
            <div>
                <p>Input Y coordinate: </p>
                <h:inputText id="yField" styleClass="y-field" value="#{attemptBean.y}" oninput="setYValueAndSync(this.value)">
                    <f:ajax event="change" execute="@this" render="@none" />
                </h:inputText>
            </div>

            <!-- R buttons -->
            <div class="command-buttons">
                <p>Choose R : </p>
                <h:commandButton value="1" action="#{attemptBean.setrList(1)}" onclick="toggleRButton(this)">
                    <f:ajax execute="@this" render="@none" />
                </h:commandButton>
                <h:commandButton value="2" action="#{attemptBean.setrList(2)}" onclick="toggleRButton(this)">
                    <f:ajax execute="@this" render="@none" />
                </h:commandButton>
                <h:commandButton value="3" action="#{attemptBean.setrList(3)}" onclick="toggleRButton(this)">
                    <f:ajax execute="@this" render="@none" />
                </h:commandButton>
                <h:commandButton value="4" action="#{attemptBean.setrList(4)}" onclick="toggleRButton(this)">
                    <f:ajax execute="@this" render="@none" />
                </h:commandButton>
                <h:commandButton value="5" action="#{attemptBean.setrList(5)}" onclick="toggleRButton(this)">
                    <f:ajax execute="@this" render="@none" />
                </h:commandButton>
            </div>

            <!-- Submit button -->
            <h:commandButton value="Submit" action="#{attemptBean.submit}">
                <f:ajax execute="@form" render=":dotsForm:dotsTable" />
            </h:commandButton>
        </h:form>

        <!-- Return button can stay in separate form -->
        <h:form>
            <h:commandButton styleClass="button-return" value="Return" action="index">
                <f:ajax execute="@this" render="@none" />
            </h:commandButton>
        </h:form>
    </div>
    <div class="right-side">
        <h:form id="dotsForm">
            <h:dataTable id="dotsTable" value="#{dataBaseBean.dots}" var="o" styleClass="dots-table">
                <h:column>
                    <f:facet name="header">X</f:facet>
                    #{o.x}
                </h:column>
                <h:column>
                    <f:facet name="header">Y</f:facet>
                    #{o.y}
                </h:column>
                <h:column>
                    <f:facet name="header">R</f:facet>
                    #{o.r}
                </h:column>
                <h:column>
                    <f:facet name="header">In area</f:facet>
                    #{o.inArea==1? 'In area' : 'Out of area'}
                </h:column>
            </h:dataTable>

            <h:commandButton value="Refresh" style="display:none">
                <f:ajax render="dotsForm:dotsTable" />
            </h:commandButton>
        </h:form>
    </div>


</h:body>
<h:outputScript library="js" name="script.js" />

</html>